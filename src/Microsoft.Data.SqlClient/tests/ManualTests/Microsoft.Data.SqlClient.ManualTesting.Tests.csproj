<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <ProjectGuid>{45DB5F86-7AE3-45C6-870D-F9357B66BDB5}</ProjectGuid>
    <TargetGroup Condition="$(TargetFramework.StartsWith('netcoreapp'))">netcoreapp</TargetGroup>
    <TargetGroup Condition="$(TargetFramework.StartsWith('net4'))">netfx</TargetGroup>
    <EnableDefaultCompileItems>false</EnableDefaultCompileItems>
    <CodeAnalysisRuleSet>Microsoft.Data.SqlClient.ManualTesting.Tests.ruleset</CodeAnalysisRuleSet>
    <Configurations>Debug;Release;net46-Release;net46-Debug;netcoreapp2.1-Debug;netcoreapp2.1-Release;netcoreapp3.1-Debug;netcoreapp3.1-Release</Configurations>
    <Platforms>AnyCPU;x86;x64</Platforms>
    <DefineConstants Condition="'$(TargetGroup)'=='netcoreapp'">$(DefineConstants);netcoreapp</DefineConstants>
    <DefineConstants Condition="'$(TargetGroup)'=='netfx'">$(DefineConstants);netfx</DefineConstants>
    <IntermediateOutputPath>$(ObjFolder)$(Configuration).ManualTests</IntermediateOutputPath>
    <OutputPath>$(BinFolder)$(Configuration).ManualTests</OutputPath>
  </PropertyGroup>
  <Target Name="CopyConfig" BeforeTargets="Compile">
    <Copy SourceFiles="config.default.json" DestinationFiles="config.json" Condition="!Exists('config.json')" />
  </Target>
  <ItemGroup>
    <Compile Include="Common\AETestFixtures\Setup\BulkCopyAEErrorMessageTestTable.cs" />
    <Compile Include="Common\AETestFixtures\Setup\BulkCopyTruncationTables.cs" />
    <Compile Include="Common\AETestFixtures\Setup\SqlNullValuesTable.cs" />
    <Compile Include="Common\AETestFixtures\Setup\AKVTestTable.cs" />
    <Compile Include="Common\AETestFixtures\Setup\ApiTestTable.cs" />
    <Compile Include="Common\AETestFixtures\Setup\BulkCopyAETestTable.cs" />
    <Compile Include="Common\AETestFixtures\Setup\ColumnEncryptionKey.cs" />
    <Compile Include="Common\AETestFixtures\Setup\ColumnMasterKey.cs" />
    <Compile Include="Common\AETestFixtures\Setup\CryptoNativeBaselineReader.cs" />
    <Compile Include="Common\AETestFixtures\Setup\CryptoVector.cs" />
    <Compile Include="Common\AETestFixtures\Setup\AkvColumnMasterKey.cs" />
    <Compile Include="Common\AETestFixtures\Setup\CspColumnMasterKey.cs" />
    <Compile Include="Common\AETestFixtures\Setup\CspProviderColumnMasterKey.cs" />
    <Compile Include="Common\AETestFixtures\Setup\DbObject.cs" />
    <Compile Include="Common\AETestFixtures\Setup\ICreatable.cs" />
    <Compile Include="Common\AETestFixtures\Setup\IDroppable.cs" />
    <Compile Include="Common\AETestFixtures\Setup\SqlParameterPropertiesTable.cs" />
    <Compile Include="Common\AETestFixtures\SQLSetupStrategy.cs" />
    <Compile Include="Common\AETestFixtures\SQLSetupStrategyAzureKeyVault.cs" />
    <Compile Include="Common\AETestFixtures\SQLSetupStrategyCertStoreProvider.cs" />
    <Compile Include="Common\AETestFixtures\Setup\Table.cs" />
    <Compile Include="Common\AETestFixtures\Setup\CertificateUtility.cs" />
    <Compile Include="Common\AETestFixtures\DatabaseHelper.cs" />
    <Compile Include="Common\AETestFixtures\Setup\CertificateUtilityWin.cs" />
    <Compile Include="Common\AETestFixtures\SQLSetupStrategyCspExt.cs" />
    <Compile Include="Common\AADUtility.cs" />
    <Compile Include="Common\CheckConnStrSetupFactAttribute.cs" />
    <Compile Include="Common\AsyncDebugScope.cs" />
    <Compile Include="Common\ConnectionPoolWrapper.cs" />
    <Compile Include="Common\InternalConnectionWrapper.cs" />
    <Compile Include="Common\SystemDataExtensions.cs" />
    <Compile Include="Common\SystemDataInternals\CommandHelper.cs" />
    <Compile Include="Common\SystemDataInternals\ConnectionHelper.cs" />
    <Compile Include="Common\SystemDataInternals\ConnectionPoolHelper.cs" />
    <Compile Include="Common\SystemDataInternals\DataReaderHelper.cs" />
    <Compile Include="Common\SystemDataInternals\TdsParserHelper.cs" />
    <Compile Include="Common\SystemDataInternals\TdsParserStateObjectHelper.cs" />
    <Compile Include="Common\AssemblyResourceManager.cs" />
    <Compile Include="Common\DataSourceBuilder.cs" />
    <Compile Include="Common\DataTestUtility.cs" />
    <Compile Include="Common\ProxyServer.cs" />
    <Compile Include="Common\SystemDataResourceManager.cs" />
    <Compile Include="Common\XUnitAssemblyAttributes.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AEAKVTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AEApiShouldTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AEBulkCopyErrorMessageTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AEBulkCopyTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AEAKVStoreTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AECoreCryptoTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AEEnd2EndSmokeTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AECspProviderExtTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AEConversionTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AEBulkCopyTruncationTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AENullValueTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AEExceptionTest.cs" />
    <Compile Include="ManualTests\AlwaysEncryptedTest\AETrustedPathsTest.cs" />
    <Compile Include="ManualTests\TracingTest\EventSourceTest.cs" />
    <Compile Include="ManualTests\AdapterTest\AdapterTest.cs" />
    <Compile Include="ManualTests\AsyncTest\BeginExecAsyncTest.cs" />
    <Compile Include="ManualTests\AsyncTest\BeginExecReaderAsyncTest.cs" />
    <Compile Include="ManualTests\AsyncTest\XmlReaderAsyncTest.cs" />
    <Compile Include="ManualTests\ConnectivityTests\ConnectionBehaviorTest.cs" />
    <Compile Include="ManualTests\ConnectivityTests\ConnectionAADTest.cs" />
    <Compile Include="ManualTests\ConnectivityTests\TcpDefaultForAzureTest.cs" />
    <Compile Include="ManualTests\ParameterTest\DateTimeVariantTest.cs" />
    <Compile Include="ManualTests\ParameterTest\OutputParameter.cs" />
    <Compile Include="ManualTests\ParameterTest\ParametersTest.cs" />
    <Compile Include="ManualTests\ParameterTest\SqlAdapterUpdateBatchTest.cs" />
    <Compile Include="ManualTests\ParameterTest\Artifacts\SqlVariantParam.cs" />
    <Compile Include="ManualTests\ParameterTest\Artifacts\SteAttribute.cs" />
    <Compile Include="ManualTests\ParameterTest\Artifacts\SteParam.cs" />
    <Compile Include="ManualTests\ParameterTest\Artifacts\StePermutationSet.cs" />
    <Compile Include="ManualTests\ParameterTest\Artifacts\SteTypeBoundaries.cs" />
    <Compile Include="ManualTests\ParameterTest\Artifacts\StreamInputParam.cs" />
    <Compile Include="ManualTests\ParameterTest\TvpTest.cs" />
    <Compile Include="ManualTests\AsyncTest\DDAsyncTest.cs" />
    <Compile Include="ManualTests\DataTypesTest\DDDataTypesTest.cs" />
    <Compile Include="ManualTests\MARSTest\DDMARSTest.cs" />
    <Compile Include="ManualTests\MARSTest\MultipleResultsTest.cs" />
    <Compile Include="ManualTests\DataReaderTest\DbDataReaderTest.cs" />
    <Compile Include="ManualTests\AsyncTest\AsyncTest.cs" />
    <Compile Include="ManualTests\AsyncTest\AsyncCancelledConnectionsTest.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\DataConversionErrorMessageTest.cs" />
    <Compile Include="ManualTests\SqlCommandTest\SqlCommandCompletedTest.cs" />
    <Compile Include="ManualTests\SqlCommandTest\SqlCommandCancelTest.cs" />
    <Compile Include="ManualTests\ConnectionPoolTest\ConnectionPoolTest.cs" />
    <Compile Include="ManualTests\ConnectivityTests\ConnectivityTest.cs" />
    <Compile Include="ManualTests\DataBaseSchemaTest\ConnectionSchemaTest.cs" />
    <Compile Include="ManualTests\DataReaderTest\DataReaderTest.cs" />
    <Compile Include="ManualTests\ExceptionTest\ExceptionTest.cs" />
    <Compile Include="ManualTests\ExceptionTest\ConnectionExceptionTest.cs" />
    <Compile Include="ManualTests\DataStreamTest\DataStreamTest.cs" />
    <Compile Include="ManualTests\DateTimeTest\DateTimeTest.cs" />
    <Compile Include="ManualTests\InstanceNameTest\InstanceNameTest.cs" />
    <Compile Include="ManualTests\IntegratedAuthenticationTest\IntegratedAuthenticationTest.cs" />
    <Compile Include="ManualTests\LocalDBTest\LocalDBTest.cs" />
    <Compile Include="ManualTests\MARSSessionPoolingTest\MARSSessionPoolingTest.cs" />
    <Compile Include="ManualTests\MARSTest\MARSTest.cs" />
    <Compile Include="ManualTests\MirroringTest\ConnectionOnMirroringTest.cs" />
    <Compile Include="ManualTests\ParallelTransactionsTest\ParallelTransactionsTest.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyWidenNullInexactNumerics.cs" />
    <Compile Include="ManualTests\SqlCommandTest\SqlCommandSetTest.cs" />
    <Compile Include="ManualTests\SqlCredentialTest\SqlCredentialTest.cs" />
    <Compile Include="ManualTests\SqlSchemaInfoTest\SqlSchemaInfoTest.cs" />
    <Compile Include="ManualTests\SqlStatisticsTest\SqlStatisticsTest.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\AdjustPrecScaleForBulkCopyTest.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\AzureDistributedTransaction.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\RowsMarkedAsDeletedErrorTest.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\DestinationTableNameTest.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Bug84548.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Bug85007.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Bug903514.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Bug98182.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CheckConstraints.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\ColumnCollation.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyAllFromReader.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyAllFromReader1.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyAllFromReaderAsync.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyAllFromReaderCancelAsync.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyAllFromReaderConnectionCloseAsync.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyAllFromReaderConnectionCloseOnEventAsync.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyMultipleReaders.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopySomeFromDatatable.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopySomeFromDatatableAsync.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopySomeFromReader.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopySomeFromRowArray.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopySomeFromRowArrayAsync.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyVariants.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyWithEvent.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyWithEvent1.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\InvalidAccessFromEvent.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\CopyWithEventAsync.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\FireTrigger.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Helpers.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\MissingTargetColumn.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\MissingTargetTable.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\SqlBulkCopyTest.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Transaction.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Transaction1.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Transaction2.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Transaction3.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\Transaction4.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\TransactionTestAsync.cs" />
    <Compile Include="ManualTests\SqlBulkCopyTest\SpecialCharacterNames.cs" />
    <Compile Include="ManualTests\SqlNamedPipesTest\SqlNamedPipesTest.cs" />
    <Compile Include="ManualTests\RandomStressTest\Randomizer.cs" />
    <Compile Include="ManualTests\RandomStressTest\RandomizerPool.cs" />
    <Compile Include="ManualTests\RandomStressTest\SqlRandomColumnOptions.cs" />
    <Compile Include="ManualTests\RandomStressTest\SqlRandomizer.cs" />
    <Compile Include="ManualTests\RandomStressTest\SqlRandomTable.cs" />
    <Compile Include="ManualTests\RandomStressTest\SqlRandomTableColumn.cs" />
    <Compile Include="ManualTests\RandomStressTest\SqlRandomTypeInfo.cs" />
    <Compile Include="ManualTests\RandomStressTest\SqlRandomTypeInfoCollection.cs" />
    <Compile Include="ManualTests\RandomStressTest\SqlRandomTypesForSqlServer.cs" />
    <Compile Include="ManualTests\RandomStressTest\RandomStressTest.cs" />
    <Compile Include="ManualTests\SplitPacketTest\SplitPacketTest.cs" />
    <Compile Include="ManualTests\SqlNotificationTest\SqlNotificationTest.cs" />
    <Compile Include="ManualTests\TransactionTest\TransactionTest.cs" />
    <Compile Include="ManualTests\TransactionTest\TransactionEnlistmentTest.cs" />
    <Compile Include="ManualTests\UdtTest\SqlServerTypesTest.cs" />
    <Compile Include="ManualTests\UdtTest\UdtBulkCopyTest.cs" />
    <Compile Include="ManualTests\UdtTest\UdtTest.cs" />
    <Compile Include="ManualTests\UdtTest\UdtTest2.cs" />
    <Compile Include="ManualTests\UdtTest\UdtTestHelpers.cs" />
    <Compile Include="ManualTests\Utf8SupportTest\Utf8SupportTest.cs" />
    <Compile Include="ManualTests\WeakRefTest\WeakRefTest.cs" />
    <Compile Include="ManualTests\WeakRefTest\WeakRefTestYukonSpecific.cs" />
    <Content Include="config.json">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Link>config.json</Link>
    </Content>
  </ItemGroup>
  <ItemGroup Condition="'$(TargetGroup)' == 'netcoreapp' OR '$(TargetGroup)' == 'netfx'">
    <Compile Include="ManualTests\ConnectionPoolTest\PoolBlockPeriodTest.netcoreapp.cs" />
    <Compile Include="ManualTests\SqlFileStreamTest\SqlFileStreamTest.cs" />
  </ItemGroup>
  <ItemGroup Condition="'$(TargetGroup)' == 'netfx'">
    <Reference Include="System.Transactions" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\add-ons\AzureKeyVaultProvider\Microsoft.Data.SqlClient.AlwaysEncrypted.AzureKeyVaultProvider.csproj" />
    <ProjectReference Include="$(TestsPath)tools\Microsoft.DotNet.XUnitExtensions\Microsoft.DotNet.XUnitExtensions.csproj">
      <Name>Microsoft.DotNet.XUnitExtensions</Name>
    </ProjectReference>
    <ProjectReference Include="UDTs\Address\Address.csproj">
      <Name>Address</Name>
    </ProjectReference>
    <ProjectReference Include="UDTs\Circle\Circle.csproj">
      <Name>Circle</Name>
    </ProjectReference>
    <ProjectReference Include="UDTs\Shapes\Shapes.csproj">
      <Name>Shapes</Name>
    </ProjectReference>
    <ProjectReference Include="UDTs\Utf8String\Utf8String.csproj">
      <Name>Utf8String</Name>
    </ProjectReference>
    <ProjectReference Include="$(TestsPath)tools\CoreFx.Private.TestUtilities\CoreFx.Private.TestUtilities.csproj">
      <Name>CoreFx.Private.TestUtilities</Name>
    </ProjectReference>
    <ProjectReference Condition="'$(TargetGroup)'=='netcoreapp'" Include="$(NetCoreSource)src\Microsoft.Data.SqlClient.csproj" />
    <ProjectReference Condition="'$(TargetGroup)'=='netfx'" Include="$(NetFxSource)src\Microsoft.Data.SqlClient.csproj" />
  </ItemGroup>
  <ItemGroup>
    <Reference Include="System.Runtime.Caching" />
    <PackageReference Include="Microsoft.IdentityModel.Clients.ActiveDirectory" Version="$(MicrosoftIdentityModelClientsActiveDirectoryVersion)" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="$(MicrosoftNETTestSdkVersion)" />
    <PackageReference Include="System.Linq.Expressions" Version="$(SystemLinqExpressionsVersion)" />
    <PackageReference Include="System.Net.Sockets" Version="$(SystemNetSocketsVersion)" />
    <PackageReference Include="Newtonsoft.Json" Version="$(NewtonsoftJsonVersion)" />
    <PackageReference Condition="'$(TargetGroup)'=='netcoreapp'" Include="Microsoft.Windows.Compatibility" Version="$(MicrosoftWindowsCompatibilityVersion)" />
  </ItemGroup>
  <ItemGroup>
    <None Condition="'$(TargetGroup)'=='netfx'" Include="$(BinFolder)$(Configuration).AnyCPU\Microsoft.Data.SqlClient\netfx\**\SNI.dll" CopyToOutputDirectory="PreserveNewest" />
  </ItemGroup>
  <ItemGroup>
    <EmbeddedResource Remove="UDTs\**" />
    <None Remove="UDTs\**" />
  </ItemGroup>
</Project>
